let[cnt,st,en]=[0,0,0],[flag,ch1,ch2]=[!1,!1,!1];const vid=document.querySelector("main video"),per=document.querySelectorAll(".innerPer"),sbVid=document.querySelector(".head video"),artGr=document.querySelectorAll(".artGroup"),heart=document.querySelectorAll(".heart"),cart=document.querySelectorAll(".cart"),tutorial=document.querySelectorAll(".stand header .text"),stand=document.querySelectorAll(".stand section .i2"),left=document.querySelectorAll(".left"),right=document.querySelectorAll(".right"),cntWrap=document.querySelectorAll(".cntWrap"),topH=cntWrap[2].getBoundingClientRect().top-100;function backSet(t,e,r,i){setTimeout(function(){"left"==t?artGr[e].append(artGr[e].children[0]):artGr[e].prepend(artGr[e].children[5]),0==r?artGr[e].animate({marginLeft:i},{duration:0,iterations:1,fill:"forwards"}):artGr[e].animate({marginRight:i},{duration:0,iterations:1,fill:"forwards"}),flag=!1;let a=artGr[e].children[1].classList;a.contains("like")?heart[e].style.color="red":heart[e].style.color="#333",a.contains("cart")?(cart[e].style.color="blue",ch2=!0):(cart[e].style.color="#333",ch2=!1)},500)}function leftSlide(t,e,r,i){if(!flag){if("left"==e){let e=artGr[t].children[2].attributes[0].nodeValue;artGr[t].animate({marginLeft:r},{duration:500,iterations:1,fill:"forwards"}),per[t].animate({width:16.66*e+"%"},{duration:500,iterations:1,fill:"forwards"})}else{let e=artGr[t].children[0].attributes[0].nodeValue;artGr[t].animate({marginLeft:r},{duration:500,iterations:1,fill:"forwards"}),per[t].animate({width:16.66*e+"%"},{duration:500,iterations:1,fill:"forwards"})}backSet(e,t,0,i)}}function rightSlide(t,e,r){if(!flag){if("left"==e){let e=artGr[t].children[2].attributes[0].nodeValue;artGr[t].animate({marginRight:"-50%"},{duration:500,iterations:1,fill:"forwards"}),per[t].animate({width:16.66*e+"%"},{duration:500,iterations:1,fill:"forwards"})}else{let e=artGr[t].children[0].attributes[0].nodeValue;artGr[t].animate({marginRight:"-0%"},{duration:500,iterations:1,fill:"forwards"}),per[t].animate({width:16.66*e+"%"},{duration:500,iterations:1,fill:"forwards"})}backSet(e,t,1,r)}}window.onscroll=function(){this.scrollY>=100?vid.pause():vid.play()},heart.forEach((t,e)=>{t.addEventListener("click",function(){ch1?(artGr[e].children[1].classList.remove("like"),this.style.color="#333",ch1=!1):(artGr[e].children[1].className+=" like",ch1=!0,this.style.color="red")})}),cart.forEach((t,e)=>{t.addEventListener("click",function(){ch2?(artGr[e].children[1].classList.remove("cart"),this.style.color="#333",ch2=!1):(artGr[e].children[1].className+=" cart",ch2=!0,this.style.color="blue")})}),tutorial.forEach(t=>{t.onclick=function(){let e=t.attributes[1].nodeValue;sbVid.src=e,stand[1].className+=" show",sbVid.nextElementSibling.addEventListener("click",t=>{stand[1].classList.remove("show"),e=t.currentTarget.attributes[1].nodeValue,sbVid.src=e}),wid>=700&&window.scrollTo({top:topH,behavior:"smooth"})}}),left[0].addEventListener("click",function(){leftSlide(0,"left","-50%","-25%"),flag=!0,ch1=!0,ch2=!0}),right[0].addEventListener("click",function(){leftSlide(0,"right","0%","-25%"),flag=!0,ch1=!0,ch2=!0}),left[1].addEventListener("click",function(){rightSlide(1,"left","-25%"),flag=!0,ch1=!0,ch2=!0}),right[1].addEventListener("click",function(){rightSlide(1,"right","-25%"),flag=!0,ch1=!0,ch2=!0}),wid<=700&&artGr.forEach((t,e)=>{let[r,i,a,l]=[0,0];t.addEventListener("touchstart",function(t){r=t.changedTouches[0].screenX,i=t.changedTouches[0].screenY},!1),t.addEventListener("touchend",function(t){a=t.changedTouches[0].screenX,l=t.changedTouches[0].screenY,r>a&&Math.abs(i-l)<=70?leftSlide(e,"left","-66.66%","-33.33%"):r<a&&Math.abs(i-l)<=70&&leftSlide(e,"right","0%","-33.33%")},!1)});