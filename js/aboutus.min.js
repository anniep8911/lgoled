let[cnt,fin,flag,nowImg]=[0,0,!1,""];const txts=document.querySelectorAll("text"),content=document.querySelector(".content"),artGr=document.querySelectorAll(".artGr"),left=document.querySelectorAll(".left"),right=document.querySelectorAll(".right"),bg=document.querySelector(".bg"),hg=document.querySelector(".cntWrap").getBoundingClientRect().height;function slider(t,e){"left"==e?(nowImg=getComputedStyle(artGr[t].children[1].children[0]).backgroundImage,bg.style.backgroundImage=nowImg,artGr[t].animate({marginLeft:"-200%"},{duration:500,iterations:1,fill:"forwards"}),bg.animate({backgroundPosition:["-300%","0%"]},{duration:500,iterations:1,fill:"forwards"})):(nowImg=getComputedStyle(artGr[t].children[0].children[0]).backgroundImage,bg.style.backgroundImage=nowImg,artGr[t].animate({marginLeft:"0%"},{duration:500,iterations:1,fill:"forwards"}),bg.animate({backgroundPosition:["0%","-300%"]},{duration:500,iterations:1,fill:"forwards"})),setTimeout(function(){artGr[t].animate({marginLeft:"-100%"},{duration:0,iterations:1,fill:"forwards"}),"left"==e?artGr[t].append(artGr[t].children[0]):(artGr[t].prepend(artGr[t].children[3]),nowImg=getComputedStyle(artGr[t].children[0].children[0]).backgroundImage,bg.style.backgroundImage=nowImg,bg.animate({backgroundPosition:["300%","0"]},{duration:500,iterations:1,fill:"forwards"}),bg.animate({opacity:[.8,1]},{duration:300,iterations:1,fill:"forwards"})),flag=!1},500)}window.addEventListener("scroll",function(){cnt=wid>=450?.3*this.scrollY:5*this.scrollY,(fin=430-cnt)<=0&&(fin=0),txts[0].style.strokeDashoffset=fin,txts[1].style.strokeDashoffset=fin}),left.forEach((t,e)=>t.addEventListener("click",function(){flag||(slider(e,"left"),flag=!0)})),right.forEach((t,e)=>t.addEventListener("click",function(){flag||(slider(e,"right"),flag=!0)}));